


  {
  
  
    "properties" : {},
  
  "type" : "lab",
  "title" : "Lab-4 Glitch Playlist 1",
  "img" : "img/main.jpg",
  "videoid" : "none",
  "objectives" : "<p>Import and run a new starter project. Extend this project to include multiple &#39;views&#39;. Explore the handlebars templating library.</p>",
  "folder" : "book-a-glitch-playlist-1",
  "link" : "index.html",
  "los": [
   ]
,
  "chapters" : [
  
    {
    "title": "# Objectives",
    "shortTitle": "Lab-4 Glitch Playlist 1",
    "contentMd" : "# Objectives\r\n\r\nImport and run a new starter project. Extend this project to include multiple 'views'. Explore the handlebars templating library.\r\n\r\n## Project Structure\r\n\r\n- be able create a new project from a github import\r\n- become familiar with the role of the controllers and the views\r\n- pass simple information from the controller to the view and render it in the view accurately\r\n\r\n## Templates\r\n\r\n- understand how simple handlebars templates are constructed\r\n- be able to relate layouts, partials and views - and understand how these are rendered from controllers\r\n- compose a simple loop to render a javascript array inside a html table\r\n\r\n## Object Representation\r\n\r\n- represent simple information as a javascript object Literal\r\n- be capable of transforming these objects into JSON format\r\n- load data from a JSON file and make it available to a javascript program.\r\n"
    },
  
    {
    "title": "# Template 1",
    "shortTitle": "01",
    "contentMd" : "# Template 1\r\n\r\nCreate a new project in Glitch; choose the hello-express option. Rename the project to your preference.\r\n\r\nTurn on the logs viewer, and then import a project from github:\r\n\r\nFirst, click 'tools' on the bottom-left of the window: \r\n\r\n![](img/01tools.png)\r\n\r\nSelect 'Git, Import and Export'. Click 'Grant Access' to give GitHub access to this project. Then, in the same menu, choose 'Import from Github'. \r\n\r\n![](img/02import.png)\r\n\r\nEnter `rbirney/playlist1` as shown. This will replace your project completely:\r\n\r\n![](img/02repo.png)\r\n\r\nYour project should now look like this: \r\n\r\n![](img/02project.png)\r\n\r\nRun the app and explore the (small) number of views:\r\n\r\n![](img/03new.png)\r\n![](img/04new.png)\r\n![](img/05new.png)\r\n\r\n"
    },
  
    {
    "title": "# Playlist",
    "shortTitle": "02",
    "contentMd" : "# Playlist\r\n\r\nWe are going to evolve this project into a simple playlist maker, enabling a user to create a playlist of songs. In this step, we will lay out a static version.\r\n\r\nFirst, we can make some simple changes to rebrand the app as `Playlist 1` instead of `Template 1`\r\n\r\nFirst replace the existing corresponding lines of code with each of the following in the views:\r\n\r\n## views/partials/menu.hbs\r\n\r\n~~~html\r\n...\r\n  <header class=\"ui header item\"> <a href=\"/\"> Playlist 1 </a></header>\r\n...\r\n~~~\r\n\r\n## views/about.hbs\r\n\r\n~~~html\r\n...\r\n<p>\r\n  A Little Playlist Maker - Version 1\r\n</p>\r\n...\r\n~~~\r\n\r\n## views/start.hbs\r\n\r\n~~~html\r\n...\r\n<h1 class=\"ui header\">\r\n  Welcome to Playlist 1\r\n</h1>\r\n<p>\r\n  A small app to let you compose playlists.\r\n</p>\r\n...\r\n~~~\r\n\r\nNow the controllers:\r\n\r\n## controllers/about.js\r\n\r\n~~~javascript\r\n...\r\n    const viewData = {\r\n      title: 'About Playlist 1',\r\n    };\r\n...\r\n~~~\r\n\r\n## controllers/start.js\r\n\r\n~~~javascript\r\n...\r\n    const viewData = {\r\n      title: 'Welcome to Playlist 1',\r\n    };\r\n...\r\n~~~\r\n\r\n## controllers/dashboard.js\r\n\r\n~~~javascript\r\n...\r\n    const viewData = {\r\n      title: 'Playlist Dashboard',\r\n    };\r\n...\r\n~~~\r\n\r\nMake sure the app is still running, but with the new branding. If there are errors, turn the logs and you may be able to see the source of the problem - which will usually be some small error in the javascript sources.\r\n"
    },
  
    {
    "title": "# Static Playlist",
    "shortTitle": "03",
    "contentMd" : "# Static Playlist\r\n\r\nIn this step we will start to display the playlist itself. First, replace `mainpanel.hbs` with a new partial called `listsongs.hbs`. \r\nWe will rename the `mainpanel.hbs` file to **listsongs.hbs**.\r\n\r\n![](./img/10.png)\r\n\r\nDelete all code and replace it with the following:\r\n\r\n## views/partials/listsongs.hbs\r\n\r\n~~~html\r\n<table class=\"ui table\">\r\n  <thead>\r\n    <tr>\r\n      <th>Song</th>\r\n      <th>Artist</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td>\r\n      </td>\r\n      <td>\r\n      </td>\r\n\t</tr>\r\n  </tbody>\r\n</table>\r\n~~~\r\n\r\nChange the dashboard view to invoke this partial:\r\n\r\n## views/dashboard.hbs\r\n\r\n~~~html\r\n{{> menu id=\"dashboard\"}}\r\n\r\n<section class=\"ui segment\">\r\n  <h2 class=\"ui header\">\r\n    Playlist Title\r\n  </h2>\r\n  {{> listsongs}}\r\n</section>\r\n~~~\r\n\r\nMake sure the app runs successfully.\r\n\r\nTo test out the UX, we might include some actual songs (replace the tbody with the following):\r\n\r\n## views/partials/listsongs.hbs\r\n\r\n~~~html\r\n<tbody>\r\n  <tr>\r\n    <td>\r\n      Piano Sonata No. 3\r\n    </td>\r\n    <td>\r\n      Beethoven\r\n    </td>\r\n  </tr>\r\n  <tr>\r\n    <td>\r\n      Piano Sonata No. 7\r\n    </td>\r\n    <td>\r\n      Beethoven\r\n    </td>\r\n  </tr>\r\n  <tr>\r\n    <td>\r\n      Piano Sonata No. 10\r\n    </td>\r\n    <td>\r\n      Beethoven\r\n    </td>\r\n  </tr>\r\n</tbody>\r\n~~~\r\n\r\n... and also give the playlist a title:\r\n\r\n## views/dashboard.hbs\r\n\r\n~~~html\r\n....\r\n  <h2 class=\"ui header\">\r\n    Beethoven Sonatas\r\n  </h2>\r\n...\r\n~~~\r\n\r\nExercise the UX fully again. Keep an eye on the logs\r\n\r\n![](img/06.png)\r\n\r\nLocate where in the controllers these messages are being generated:\r\n\r\n~~~js\r\n...\r\n    logger.info('start rendering');\r\n...\r\n~~~\r\n\r\nThese logging messages are a useful technique for figuring out what might be going wrong with an app. There are three variants of the logging statement: `info`, `error` and `debug`. Experiment now with some of these, and exercise the app to make sure the log messages appear.\r\n\r\n~~~js\r\n...\r\n    logger.error('some error has occurred');\r\n...\r\n~~~\r\n\r\n~~~js\r\n...\r\n    logger.debug('some step has occurred...');\r\n...\r\n~~~\r\n\r\nError and debug messages may appear in red. You might need to open the `source` and `run` views of the app in side by side windows to get a clearer view of the logs.\r\n"
    },
  
    {
    "title": "# Dynamic Playlist",
    "shortTitle": "04",
    "contentMd" : "# Dynamic Playlist\r\n\r\nThe app as we have it now could have been completely built as a static web site. However, the framework and tools we have used in this version enable us to evolve \r\nthis static site into an interactive app.\r\n\r\nThe first step is to eliminate some of the static content from the songlist partial. Here is a new version to replace the current version (In listsongs.hbs replace the table with the following):\r\n\r\n~~~html\r\n<table class=\"ui table\">\r\n  <thead>\r\n    <tr>\r\n      <th>Song</th>\r\n      <th>Artist</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {{#each playlist.songs}}\r\n      <tr>\r\n        <td>\r\n          {{title}}\r\n        </td>\r\n        <td>\r\n          {{artist}}\r\n        </td>\r\n      </tr>\r\n    {{/each}}\r\n  </tbody>\r\n</table>\r\n~~~\r\n\r\nIn the above, we are `iterating` over an `array` of `songs` inside a `playlist` object:\r\n\r\n~~~html\r\n{{#each playlist.songs}}\r\n  <tr>\r\n    <td>\r\n      {{title}}\r\n    </td>\r\n    <td>\r\n      {{artist}}\r\n    </td>\r\n  </tr>\r\n{{/each}}\r\n~~~\r\n\r\nThis playlist object must be passed to the view for this to work.\r\n\r\nIn the `dashboard.js` controller, we can define a playlist object in Javascript (place this definition prior to the dashboard object definition):\r\n\r\n~~~js\r\nconst sonatas = {\r\n  title: 'Sonatas',\r\n  songs: [\r\n    {\r\n      title: 'Piano Sonata No. 3',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Sonata No. 7',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Sonata No. 10',\r\n      artist: 'Beethoven',\r\n    },\r\n  ],\r\n};\r\n~~~\r\n\r\nExamine the above structure carefully. This is a javascript `object literal`. It consists of :\r\n\r\n- a title field containing the string `Sonatas`\r\n- an array called `songs`, which contains 3 objects, each of which has:\r\n    - title\r\n    - artist\r\n\r\nThe index method which is located in  dashboard.js file can now be modified to pass this list to the view:\r\n\r\n~~~js\r\nconst dashboard = {\r\nindex(request, response) {\r\n  logger.info('dashboard rendering');\r\n  const viewData = {\r\n    title: 'Playlist Dashboard',\r\n    playlist: sonatas,\r\n  };\r\n  response.render('dashboard', viewData);\r\n},\r\n};\r\n~~~\r\n\r\nThis should work now as expected. Make sure the playlist is displayed as expected.\r\n\r\nWe can take advantage of the logger to display the playlist before we render it:\r\n\r\n~~~js\r\nindex(request, response) {\r\n  logger.info('dashboard rendering');\r\n  const viewData = {\r\n    title: 'Playlist Dashboard',\r\n    playlist: sonatas,\r\n  };\r\n  logger.info('about to render', sonatas);\r\n  response.render('dashboard', viewData);\r\n},\r\n~~~\r\n\r\nYou should see something like this in the logs:\r\n\r\n![](img/07.png)\r\n"
    },
  
    {
    "title": "# playlist-store",
    "shortTitle": "05",
    "contentMd" : "# playlist-store\r\n\r\nWe would like to manage the playlists separately from the controller, so that we can eventually introduce multiple playlists.\r\n\r\nTo prepare for this, create a new javascript module in the backend of your app call it `playlist-store.js` in a new `models` folder. In Glitch, you can enter a full path, including a new directory when adding a file:\r\n\r\n![](img/08.png)\r\n\r\n## models/playlist-store.js\r\n\r\n~~~js\r\n'use strict';\r\n\r\nconst logger = require('../utils/logger');\r\n\r\nconst sonatas = {\r\n  title: 'Beethoven Sonatas',\r\n  songs: [\r\n    {\r\n      title: 'Piano Sonata No. 3',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Sonata No. 7',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Sonata No. 10',\r\n      artist: 'Beethoven',\r\n    },\r\n  ],\r\n};\r\n\r\nmodule.exports = sonatas;\r\n~~~\r\n\r\nDashboard can then be simplified:\r\n\r\n## controllers/dashboard.js\r\n\r\n~~~js\r\n'use strict';\r\n\r\nconst logger = require('../utils/logger');\r\nconst sonatas = require('../models/playlist-store.js');\r\n\r\nconst dashboard = {\r\n  index(request, response) {\r\n    logger.info('dashboard rendering');\r\n    const viewData = {\r\n      title: 'Playlist Dashboard',\r\n      playlist: sonatas,\r\n    };\r\n    logger.info('about to render', sonatas);\r\n    response.render('dashboard', viewData);\r\n  },\r\n};\r\n\r\nmodule.exports = dashboard;\r\n~~~\r\n\r\nNotice in the above that we are importing the sonatas from the playlist-store module. Otherwise, the dashboard is unchanged.\r\n"
    },
  
    {
    "title": "# Multiple playlists",
    "shortTitle": "06",
    "contentMd" : "# Multiple playlists\r\n\r\nHere is a new version of `playlist-store.js`:\r\n\r\n## models/playlist-store.js\r\n\r\n~~~\r\n'use strict';\r\n\r\nconst logger = require('../utils/logger');\r\n\r\nconst sonatas = {\r\n  title: 'Beethoven Sonatas',\r\n  songs: [\r\n    {\r\n      title: 'Piano Sonata No. 3',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Sonata No. 7',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Sonata No. 10',\r\n      artist: 'Beethoven',\r\n    },\r\n  ],\r\n};\r\n\r\nconst concertos = {\r\n  title: 'Beethoven Concertos',\r\n  songs: [\r\n    {\r\n      title: 'Piano Concerto No. 0',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Concerto  No. 4',\r\n      artist: 'Beethoven',\r\n    },\r\n    {\r\n      title: 'Piano Concerto  No. 6',\r\n      artist: 'Beethoven',\r\n    },\r\n  ],\r\n};\r\n\r\nconst playlistCollection = [sonatas, concertos];\r\n\r\nmodule.exports = playlistCollection;\r\n~~~\r\n\r\nHere we are defining 2 playlists :\r\n\r\n- sonatas\r\n- concertos\r\n\r\n... and then an array called `playlistCollection`, which lists these two:\r\n\r\n~~~js\r\nconst playlistCollection = [sonatas, concertos];\r\n~~~\r\n\r\nThis is the object that is then exported:\r\n\r\n~~~js\r\nmodule.exports = playlistCollection;\r\n~~~\r\n\r\nIn a revised dashboard, we import this object, and pass it to the view:\r\n\r\n## controllers/dashboard.js\r\n\r\n~~~\r\n...\r\nconst playlistCollection = require('../models/playlist-store.js');\r\n\r\nconst dashboard = {\r\n  index(request, response) {\r\n    logger.info('dashboard rendering');\r\n    const viewData = {\r\n      title: 'Playlist Dashboard',\r\n      playlists: playlistCollection,\r\n    };\r\n    logger.info('about to render', playlistCollection);\r\n    response.render('dashboard', viewData);\r\n  },\r\n};\r\n...\r\n~~~\r\n\r\nThe dashboard view will have to be rewritten to now display a collection of playlists (we no longer use the listsongs.hbs partial in the dashboard.hbs):\r\n\r\n## views/dashboard.hbs\r\n\r\n~~~html\r\n{{> menu id=\"dashboard\"}}\r\n\r\n{{#each playlists}}\r\n  <section class=\"ui segment\">\r\n    <h2 class=\"ui header\">\r\n      {{title}}\r\n    </h2>\r\n    <table class=\"ui table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Song</th>\r\n          <th>Artist</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {{#each songs}}\r\n          <tr>\r\n            <td>\r\n              {{title}}\r\n            </td>\r\n            <td>\r\n              {{artist}}\r\n            </td>\r\n          </tr>\r\n        {{/each}}\r\n      </tbody>\r\n    </table>\r\n  </section>\r\n{{/each}}\r\n~~~\r\n\r\nTry this now, making sure you are seeing the two playlists on the dashboard:\r\n\r\n![](img/09.png)\r\n\r\nLook carefully at `views/dashboard.hbs`, see if you can relate the template to the playlist data structure being passed to to it. Notice that it is performing a nested loop:\r\n\r\n- iterating over the playlist array\r\n\r\n~~~html\r\n...\r\n{{#each playlists}}\r\n  ...\r\n{{/each}}\r\n~~~\r\n\r\n- then iterating over each song in a given playlist.\r\n\r\n~~~html\r\n...\r\n{{#each playlists}}\r\n  ...\r\n  {{#each songs}}\r\n    ...\r\n  {{/each}}\r\n  ..\r\n{{/each}}\r\n~~~\r\n\r\nNotice that `title` means something slightly different in each context\r\n\r\n- the title of the playlist\r\nOR\r\n- the title of a song\r\n"
    },
  
    {
    "title": "# Introducing JSON",
    "shortTitle": "07",
    "contentMd" : "# Introducing JSON\r\n\r\nIn javascript, it can sometimes be very convenient to use a notation to represent a data structure, but without any additional javascript constructs. Java Script Object Notation (JSON) is designed for this purpose. Here is a new file to represent our playlists in JSON format, create it for the backend of your app:\r\n\r\n## models/playlist-store.json\r\n\r\n~~~js\r\n{\r\n  \"playlistCollection\": [\r\n    {\r\n      \"title\": \"Beethoven Sonatas\",\r\n      \"songs\": [\r\n        {\r\n          \"title\": \"Piano Sonata No. 3\",\r\n          \"artist\": \"Beethoven\"\r\n        },\r\n        {\r\n          \"title\": \"Piano Sonata No. 7\",\r\n          \"artist\": \"Beethoven\"\r\n        },\r\n        {\r\n          \"title\": \"Piano Sonata No. 10\",\r\n          \"artist\": \"Beethoven\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"title\": \"Beethoven Concertos\",\r\n      \"songs\": [\r\n        {\r\n          \"title\": \"Piano Concerto No. 0\",\r\n          \"artist\": \"Beethoven\"\r\n        },\r\n        {\r\n          \"title\": \"Piano Concerto No. 4\",\r\n          \"artist\": \"Beethoven\"\r\n        },\r\n        {\r\n          \"title\": \"Piano Concerto No. 6\",\r\n          \"artist\": \"Beethoven\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n~~~\r\n\r\nWe consider this to be a data file rather than a program. Although it looks superficially like javascript, you cannot put control structures, functions or \r\nother constructs. Also, the format is very strict, so the use of double quotes and separator commas is very precise. Any deviation will generate an error in any program that attempts to read it.\r\n\r\nWe can revise `playlist-store.js` to read this file now:\r\n\r\n## models/playlist-store.js\r\n\r\n~~~js\r\n'use strict';\r\n\r\nconst playlistCollection = require('./playlist-store.json').playlistCollection;\r\n\r\nmodule.exports = playlistCollection;\r\n~~~\r\n\r\nThe program should behave exactly as before.\r\n"
    },
  
    {
    "title": "# Exercises & Archives",
    "shortTitle": "Exercises",
    "contentMd" : "# Exercises & Archives\r\n\r\n## Exercise 1: Review the JSON file format\r\n\r\nLook again at the playlist as represented in:\r\n\r\n- Step 6: Javascript Object Literal\r\n- Step 7: JSON\r\n\r\nReview the differences carefully.\r\n\r\n## Exercise 2: Add a new playlist\r\n\r\nExtend the JSON file to include an additional playlist - so that three playlists are displayed on the dashboard.\r\n\r\n## Exercise 3: Introduce IDs\r\n\r\nWhen manipulating data maintained in JSON, or other external format, each object will often require an ID in order to manipulate the information effectively. Introduce an ID for every playlist, and every song, now.\r\n\r\nFor instance for a playlist:\r\n\r\n~~~js\r\n\"playlistCollection\": [\r\n   {\r\n     \"id\": \"01\",\r\n     \"title\": \"Beethoven Sonatas\",\r\n     \"songs\": [\r\n~~~\r\n\r\n... and for a song:\r\n\r\n~~~\r\n{\r\n  \"id\": \"03\",\r\n  \"title\": \"Piano Sonata No. 3\",\r\n  \"artist\": \"Beethoven\"\r\n},\r\n~~~\r\n\r\nPlace unique IDs on all your playlists and songs now. You can use any unique numbers (enclosed in double quotes) for the moment.\r\n\r\n## Exercise 4: New Fields\r\n\r\nExtend the playlist to have new entry called `duration`. Also, extend each song to also have a `duration` field + a `genre` field.\r\n\r\nModify the dashboard view to display these new fields.\r\n\r\n## Exercise 5:\r\n\r\nExtend the following views:\r\n\r\n- Welcome: Extend the welcome view to contain a more detailed outline of the purpose of the application\r\n- About: Extend the about view to provide contact details (may be fictitious) for the author/company that created the app.\r\n\r\n## Exercise 6: Run Locally\r\n\r\nDownload the app and run it on your own workstation. Instructions for doing this are in the last lab.\r\n\r\n## Complete Playlist 1\r\n\r\nIf you want to download a complete version of the app as it should be at the end of this lab, then create a new Glitch project, and import `rbirney/playlist1-complete`.\r\n."
    }
  
  ]
  }

